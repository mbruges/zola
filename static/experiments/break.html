<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/repton-blue.png" type="image/png">
        <meta property="og:title" content="Breaktime" />
        <meta property="og:description" content="Is it Red Break?" />
        <meta property="og:image" content="/images/repton-blue.png" />
        <meta property="og:url" content="https://www.maxbruges.com/experiments/break.html" />
    <title>Breaktime</title>
</head>

<style>

.loader {
 border: 9px solid #f3f3f3; /* Light grey */
 border-top: 9px solid #3498db; /* Blue */
 border-radius: 50%;
 width: 40px;
 height: 40px;
 animation: spin 1s linear infinite;
}

@keyframes spin {
 0% { transform: rotate(0deg); }
 100% { transform: rotate(360deg); }
}

body {
    background-color:slategrey;
    text-align: center;
}
h1 {
    text-shadow: 1px 1px 0px black;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 30pt;

    color: white;
}

#time {
    color:lightgrey;
}

</style>

<script>
fetch("https://api.mxb.fyi/mail")
  .then(response => response.json())
  .then(data => {
    console.log(data.message);
    date = data.date
    data = data.message
      var title = document.getElementById('title');
      text = "?"
      if ((data.toLowerCase().includes("red")) || (data.toLowerCase().includes("amber"))) {
        text = "RED";
        document.body.style.backgroundColor = "red";
      } else {
        text = "GREEN";
        document.body.style.backgroundColor = "seagreen";
      }
      title.className = "";
      document.title = `${text} break`
      title.innerHTML = `It's ${text} break`
      document.getElementById('time').innerText = `Last updated: ${date}`
    })
    .catch(error => console.error('Error:', error));
</script>
<body>
    <h1 id=title class="loader"></h1>
    <small id="time"></small>
</body>
